2024-07-10 12:46:35.945 [main] INFO  c.c.t.l.book_api.ApplicationTests - Starting ApplicationTests using Java 21.0.3 with PID 12628 (started by muhammad.daud.rizvi in C:\Users\muhammad.daud.rizvi\Downloads\book-api)
2024-07-10 12:46:35.947 [main] DEBUG c.c.t.l.book_api.ApplicationTests - Running with Spring Boot v3.3.1, Spring v6.1.10
2024-07-10 12:46:35.947 [main] INFO  c.c.t.l.book_api.ApplicationTests - No active profile set, falling back to 1 default profile: "default"
2024-07-10 12:46:38.062 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-10 12:46:38.148 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 2 JPA repository interfaces.
2024-07-10 12:46:39.461 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-07-10 12:46:39.935 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:books user=TEST
2024-07-10 12:46:39.938 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-07-10 12:46:40.081 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2024-07-10 12:46:40.578 [main] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-07-10 12:46:40.746 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:46:40.862 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2024-07-10 12:46:40.863 [main] INFO  liquibase.command - Using deploymentId: 0597600862
2024-07-10 12:46:40.865 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:46:40.933 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::schema-book-0.0.1::book team
2024-07-10 12:46:40.944 [main] INFO  liquibase.changelog - Table books created
2024-07-10 12:46:40.945 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::schema-book-0.0.1::book team ran successfully in 10ms
2024-07-10 12:46:40.954 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::data-book-0.0.1::book team
2024-07-10 12:46:40.956 [main] INFO  liquibase.changelog - New row inserted into books
2024-07-10 12:46:40.957 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::data-book-0.0.1::book team ran successfully in 3ms
2024-07-10 12:46:40.960 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::data-book-0.0.2::book team
2024-07-10 12:46:40.963 [main] INFO  liquibase.changelog - New row inserted into books
2024-07-10 12:46:40.963 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::data-book-0.0.2::book team ran successfully in 3ms
2024-07-10 12:46:40.966 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-user.yaml::schema-user-0.0.2::book team
2024-07-10 12:46:40.971 [main] INFO  liquibase.changelog - Table users created
2024-07-10 12:46:40.974 [main] INFO  liquibase.changelog - Primary key added to users (user_id)
2024-07-10 12:46:40.974 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-user.yaml::schema-user-0.0.2::book team ran successfully in 7ms
2024-07-10 12:46:40.979 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-user.yaml::data-user-0.0.2::book team
2024-07-10 12:46:40.981 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:46:40.983 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:46:40.984 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:46:40.985 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-user.yaml::data-user-0.0.2::book team ran successfully in 6ms
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - UPDATE SUMMARY
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - Run:                          5
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - Previously run:               0
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - Filtered out:                 0
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - -------------------------------
2024-07-10 12:46:40.996 [main] INFO  liquibase.util - Total change sets:            5
2024-07-10 12:46:40.998 [main] INFO  liquibase.util - Update summary generated
2024-07-10 12:46:41.002 [main] INFO  liquibase.command - Update command completed successfully.
2024-07-10 12:46:41.002 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 10
2024-07-10 12:46:41.005 [main] INFO  liquibase.lockservice - Successfully released change log lock
2024-07-10 12:46:41.006 [main] INFO  liquibase.command - Command execution complete
2024-07-10 12:46:41.198 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-10 12:46:41.310 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2024-07-10 12:46:41.371 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2024-07-10 12:46:41.946 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-10 12:46:43.517 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-10 12:46:43.522 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:46:45.258 [main] TRACE o.s.s.c.a.a.c.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer - Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@763a71ff}
2024-07-10 12:46:45.299 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userService
2024-07-10 12:46:45.516 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2024-07-10 12:46:46.196 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 16 endpoints beneath base path '/actuator'
2024-07-10 12:46:46.252 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-07-10 12:46:47.175 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:books'
2024-07-10 12:46:47.246 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.246 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books', GET]
2024-07-10 12:46:47.246 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.246 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books/**', GET]
2024-07-10 12:46:47.246 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/swagger-ui/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.246 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/swagger-ui/**', GET]
2024-07-10 12:46:47.246 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.246 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs', GET]
2024-07-10 12:46:47.246 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.247 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs/**', GET]
2024-07-10 12:46:47.247 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.html', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.247 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.html', GET]
2024-07-10 12:46:47.247 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.js', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:47.247 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.js', GET]
2024-07-10 12:46:47.397 [main] INFO  c.c.t.l.book_api.ApplicationTests - Started ApplicationTests in 12.22 seconds (process running for 14.522)
2024-07-10 12:46:48.563 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.codebydaud.training.lecture_02.book_api.BookApiTests]: BookApiTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-07-10 12:46:48.576 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.codebydaud.training.lecture_02.book_api.Application for test class com.codebydaud.training.lecture_02.book_api.BookApiTests
2024-07-10 12:46:48.640 [main] INFO  c.c.t.l.book_api.BookApiTests - Starting BookApiTests using Java 21.0.3 with PID 12628 (started by muhammad.daud.rizvi in C:\Users\muhammad.daud.rizvi\Downloads\book-api)
2024-07-10 12:46:48.640 [main] DEBUG c.c.t.l.book_api.BookApiTests - Running with Spring Boot v3.3.1, Spring v6.1.10
2024-07-10 12:46:48.640 [main] INFO  c.c.t.l.book_api.BookApiTests - No active profile set, falling back to 1 default profile: "default"
2024-07-10 12:46:49.153 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-10 12:46:49.163 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 2 JPA repository interfaces.
2024-07-10 12:46:49.332 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2024-07-10 12:46:49.333 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:books user=TEST
2024-07-10 12:46:49.333 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2024-07-10 12:46:49.335 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2024-07-10 12:46:49.419 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:46:49.435 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2024-07-10 12:46:49.436 [main] INFO  liquibase.command - Using deploymentId: 0597609436
2024-07-10 12:46:49.437 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:46:49.440 [main] INFO  liquibase.util - UPDATE SUMMARY
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - Run:                          0
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - Previously run:               5
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - Filtered out:                 0
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - -------------------------------
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - Total change sets:            5
2024-07-10 12:46:49.441 [main] INFO  liquibase.util - Update summary generated
2024-07-10 12:46:49.441 [main] INFO  liquibase.command - Update command completed successfully.
2024-07-10 12:46:49.442 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 0
2024-07-10 12:46:49.443 [main] INFO  liquibase.lockservice - Successfully released change log lock
2024-07-10 12:46:49.444 [main] INFO  liquibase.command - Command execution complete
2024-07-10 12:46:49.487 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-10 12:46:49.490 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2024-07-10 12:46:49.501 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-10 12:46:49.608 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-10 12:46:49.608 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:46:50.036 [main] TRACE o.s.s.c.a.a.c.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer - Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@1257039c}
2024-07-10 12:46:50.038 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userService
2024-07-10 12:46:50.087 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2024-07-10 12:46:50.414 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 16 endpoints beneath base path '/actuator'
2024-07-10 12:46:50.450 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-07-10 12:46:50.821 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:books'
2024-07-10 12:46:50.860 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.860 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books', GET]
2024-07-10 12:46:50.860 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books/**', GET]
2024-07-10 12:46:50.861 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/swagger-ui/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/swagger-ui/**', GET]
2024-07-10 12:46:50.861 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs', GET]
2024-07-10 12:46:50.861 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs/**', GET]
2024-07-10 12:46:50.861 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.html', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.html', GET]
2024-07-10 12:46:50.861 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.js', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:46:50.861 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.js', GET]
2024-07-10 12:46:50.930 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-07-10 12:46:50.930 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-07-10 12:46:50.932 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-07-10 12:46:50.964 [main] INFO  c.c.t.l.book_api.BookApiTests - Started BookApiTests in 2.381 seconds (process running for 18.089)
2024-07-10 12:46:51.004 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.004 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.005 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books/1
2024-07-10 12:46:51.362 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.363 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books
2024-07-10 12:46:51.530 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.530 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.533 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.535 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.536 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1de66d6b]
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.540 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.541 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.541 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.541 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:46:51.545 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.552 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.553 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.554 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.557 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.557 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.559 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.559 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.559 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.559 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.559 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.560 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.560 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.560 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.560 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.560 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.562 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.563 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.563 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.567 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:46:51.568 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.568 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.569 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:46:51.573 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:46:51.633 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.650 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.701 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:51.724 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.725 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.725 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.725 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.726 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] to HttpSession [org.springframework.mock.web.MockHttpSession@15b0a155]
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.727 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.728 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.728 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.729 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.729 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.730 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.730 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.730 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.731 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:46:51.731 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.731 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.731 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]
2024-07-10 12:46:51.732 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:46:51.735 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.736 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.743 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:51.767 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.767 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.767 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books/3
2024-07-10 12:46:51.784 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.784 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.785 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.785 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.785 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3627bd19]
2024-07-10 12:46:51.787 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.787 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.787 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.787 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.788 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.788 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.789 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.789 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.789 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/1
2024-07-10 12:46:51.789 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.790 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.791 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.791 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.791 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.791 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.791 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.792 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.792 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.792 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.792 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.792 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.792 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.792 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.793 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/1
2024-07-10 12:46:51.793 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.793 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.793 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:46:51.794 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/1
2024-07-10 12:46:51.796 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.803 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@15c99c06 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAuthority('admin')]
2024-07-10 12:46:51.807 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.deleteBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:936)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:596)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testDeleteBookUnAuthorizedAccess(BookApiTests.java:179)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-07-10 12:46:51.813 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:46:51.814 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:51.829 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.829 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.829 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.829 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.829 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@44990f93]
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.831 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:46:51.831 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.833 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.834 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.834 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.834 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.834 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.835 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.835 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.835 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.835 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.836 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.836 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.836 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.836 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.837 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:46:51.837 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.837 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.837 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:46:51.839 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:46:51.841 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.843 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.861 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:51.877 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.877 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.877 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.877 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.877 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2647ce58]
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.878 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.879 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.879 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.880 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.881 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:46:51.881 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.881 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.881 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:46:51.882 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:46:51.883 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.884 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@15c99c06 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyAuthority('admin','editor')]
2024-07-10 12:46:51.884 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.updateBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testUpdateBookUnAuthorizedAccess(BookApiTests.java:145)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-07-10 12:46:51.885 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:46:51.885 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:51.894 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:51.895 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.895 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:51.895 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:51.895 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@79b002d2]
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:51.896 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/1
2024-07-10 12:46:51.896 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:51.897 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:51.897 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/1
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:51.898 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:46:51.899 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/1
2024-07-10 12:46:51.900 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:51.900 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.377 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:52.387 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:52.388 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.388 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.388 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:52.388 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5839e11f]
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:52.389 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:46:52.389 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:52.390 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:52.391 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:46:52.392 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:46:52.393 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.394 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.397 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:52.408 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:52.408 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.408 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.408 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:52.408 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7a014634]
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:52.409 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/5
2024-07-10 12:46:52.409 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:52.410 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:52.410 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:52.411 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:52.411 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:52.411 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:52.411 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/5
2024-07-10 12:46:52.411 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/5 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:52.411 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:52.411 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:46:52.412 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/5
2024-07-10 12:46:52.412 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.413 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.416 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:52.430 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:52.430 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.430 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.430 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:52.430 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4e13fdaa]
2024-07-10 12:46:52.431 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:52.432 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:46:52.432 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:52.433 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:52.433 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:52.434 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:52.435 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:46:52.435 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:52.435 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:52.435 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]
2024-07-10 12:46:52.436 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:46:52.437 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.438 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@15c99c06 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyAuthority('admin','author')]
2024-07-10 12:46:52.439 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.createBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testCreateBookUnAuthorizedAccess(BookApiTests.java:97)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-07-10 12:46:52.439 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:46:52.439 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:52.449 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:46:52.449 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.449 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:46:52.449 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:46:52.449 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@38d94ab3]
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@893991a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fec3374, org.springframework.security.web.context.SecurityContextHolderFilter@1c879041, org.springframework.security.web.header.HeaderWriterFilter@3ae010b5, org.springframework.web.filter.CorsFilter@177fbad9, org.springframework.security.web.csrf.CsrfFilter@11d6ed80, org.springframework.security.web.authentication.logout.LogoutFilter@78859420, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@594722f1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4a8c67c0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@395c0068, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423763f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@655c1c55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d930510, org.springframework.security.web.access.ExceptionTranslationFilter@1e65a8d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7cf6f]] (8/8)
2024-07-10 12:46:52.451 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/5
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:46:52.451 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:46:52.452 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:46:52.453 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/5
2024-07-10 12:46:52.453 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/5 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@74999cb9
2024-07-10 12:46:52.453 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:46:52.453 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:46:52.453 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/5
2024-07-10 12:46:52.455 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.456 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:46:52.459 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:46:52.886 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:46:52.889 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-07-10 12:46:52.893 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-07-10 12:46:52.906 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:46:52.906 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2024-07-10 12:46:52.910 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2024-07-10 12:52:13.433 [main] INFO  c.c.t.l.book_api.BookApiTests - Starting BookApiTests using Java 21.0.3 with PID 11504 (started by muhammad.daud.rizvi in C:\Users\muhammad.daud.rizvi\Downloads\book-api)
2024-07-10 12:52:13.434 [main] DEBUG c.c.t.l.book_api.BookApiTests - Running with Spring Boot v3.3.1, Spring v6.1.10
2024-07-10 12:52:13.435 [main] INFO  c.c.t.l.book_api.BookApiTests - No active profile set, falling back to 1 default profile: "default"
2024-07-10 12:52:14.961 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-10 12:52:15.032 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 2 JPA repository interfaces.
2024-07-10 12:52:15.982 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-07-10 12:52:16.240 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:books user=TEST
2024-07-10 12:52:16.242 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-07-10 12:52:16.325 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2024-07-10 12:52:16.697 [main] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-07-10 12:52:16.825 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:52:16.912 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2024-07-10 12:52:16.913 [main] INFO  liquibase.command - Using deploymentId: 0597936913
2024-07-10 12:52:16.915 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2024-07-10 12:52:16.946 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::schema-book-0.0.1::book team
2024-07-10 12:52:16.952 [main] INFO  liquibase.changelog - Table books created
2024-07-10 12:52:16.953 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::schema-book-0.0.1::book team ran successfully in 6ms
2024-07-10 12:52:16.960 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::data-book-0.0.1::book team
2024-07-10 12:52:16.961 [main] INFO  liquibase.changelog - New row inserted into books
2024-07-10 12:52:16.962 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::data-book-0.0.1::book team ran successfully in 2ms
2024-07-10 12:52:16.965 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-book.yaml::data-book-0.0.2::book team
2024-07-10 12:52:16.967 [main] INFO  liquibase.changelog - New row inserted into books
2024-07-10 12:52:16.967 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-book.yaml::data-book-0.0.2::book team ran successfully in 2ms
2024-07-10 12:52:16.970 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-user.yaml::schema-user-0.0.2::book team
2024-07-10 12:52:16.973 [main] INFO  liquibase.changelog - Table users created
2024-07-10 12:52:16.975 [main] INFO  liquibase.changelog - Primary key added to users (user_id)
2024-07-10 12:52:16.975 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-user.yaml::schema-user-0.0.2::book team ran successfully in 5ms
2024-07-10 12:52:16.980 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-user.yaml::data-user-0.0.2::book team
2024-07-10 12:52:16.982 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:52:16.983 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:52:16.984 [main] INFO  liquibase.changelog - New row inserted into users
2024-07-10 12:52:16.985 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-user.yaml::data-user-0.0.2::book team ran successfully in 4ms
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - UPDATE SUMMARY
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - Run:                          5
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - Previously run:               0
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - Filtered out:                 0
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - -------------------------------
2024-07-10 12:52:16.993 [main] INFO  liquibase.util - Total change sets:            5
2024-07-10 12:52:16.994 [main] INFO  liquibase.util - Update summary generated
2024-07-10 12:52:16.997 [main] INFO  liquibase.command - Update command completed successfully.
2024-07-10 12:52:16.997 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 10
2024-07-10 12:52:16.999 [main] INFO  liquibase.lockservice - Successfully released change log lock
2024-07-10 12:52:17.000 [main] INFO  liquibase.command - Command execution complete
2024-07-10 12:52:17.138 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-10 12:52:17.208 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2024-07-10 12:52:17.249 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2024-07-10 12:52:17.628 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-10 12:52:18.684 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-10 12:52:18.688 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:52:19.910 [main] TRACE o.s.s.c.a.a.c.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer - Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@377bc8da}
2024-07-10 12:52:19.940 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userService
2024-07-10 12:52:20.104 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2024-07-10 12:52:20.657 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 16 endpoints beneath base path '/actuator'
2024-07-10 12:52:20.710 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-07-10 12:52:21.428 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:books'
2024-07-10 12:52:21.485 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books', GET]
2024-07-10 12:52:21.486 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/api/v1/books/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/api/v1/books/**', GET]
2024-07-10 12:52:21.486 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/swagger-ui/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/swagger-ui/**', GET]
2024-07-10 12:52:21.486 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs', GET]
2024-07-10 12:52:21.486 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/v3/api-docs/**', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/v3/api-docs/**', GET]
2024-07-10 12:52:21.486 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.html', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.486 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.html', GET]
2024-07-10 12:52:21.487 [main] WARN  o.s.s.c.a.web.builders.WebSecurity - You are asking Spring Security to ignore Ant [pattern='/index.js', GET]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2024-07-10 12:52:21.487 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will not secure Ant [pattern='/index.js', GET]
2024-07-10 12:52:21.600 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-07-10 12:52:21.600 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-07-10 12:52:21.602 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-07-10 12:52:21.710 [main] INFO  c.c.t.l.book_api.BookApiTests - Started BookApiTests in 8.808 seconds (process running for 10.149)
2024-07-10 12:52:22.558 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:22.558 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:22.559 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books/1
2024-07-10 12:52:22.787 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:22.787 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books
2024-07-10 12:52:22.917 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:22.917 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:22.919 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:22.920 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:22.922 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6272fe30]
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:22.927 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:22.928 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:22.928 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:52:22.930 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:22.935 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:22.935 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:22.936 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:22.937 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:22.937 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:22.937 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:22.937 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:22.938 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:22.938 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:22.938 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:22.938 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:22.938 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:22.938 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:22.938 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:22.938 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:22.940 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:22.940 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:22.940 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:22.942 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:52:22.943 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:22.943 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:22.943 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:52:22.946 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:52:22.981 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:22.994 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.029 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.042 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.042 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.042 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.042 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.042 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] to HttpSession [org.springframework.mock.web.MockHttpSession@70366fb5]
2024-07-10 12:52:23.043 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.044 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.044 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.045 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.046 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.046 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.046 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.046 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.046 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.046 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.046 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:52:23.046 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.046 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.046 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]
2024-07-10 12:52:23.047 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:52:23.050 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.051 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.055 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.066 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.066 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.066 [main] TRACE o.s.security.web.FilterChainProxy - No security for GET /api/v1/books/3
2024-07-10 12:52:23.078 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.078 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.078 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.078 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.078 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@79172834]
2024-07-10 12:52:23.079 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.079 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.079 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.080 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/1
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.080 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.081 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.081 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.082 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.082 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.082 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.082 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/1
2024-07-10 12:52:23.082 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.082 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.082 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:52:23.083 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/1
2024-07-10 12:52:23.084 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.088 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@745b4ed4 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAuthority('admin')]
2024-07-10 12:52:23.091 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.deleteBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:936)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:596)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testDeleteBookUnAuthorizedAccess(BookApiTests.java:179)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-07-10 12:52:23.095 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:52:23.095 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.105 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.105 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.105 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.105 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.106 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2c7ceffa]
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.107 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.107 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.108 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.109 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.109 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.109 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:52:23.109 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.109 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.110 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:52:23.110 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:52:23.111 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.112 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.124 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.135 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.135 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.135 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.135 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.135 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7ed47927]
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.136 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.137 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/1
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.137 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.138 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.139 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/1
2024-07-10 12:52:23.139 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.139 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.139 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:52:23.139 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/1
2024-07-10 12:52:23.140 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.141 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@745b4ed4 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyAuthority('admin','editor')]
2024-07-10 12:52:23.142 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.updateBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testUpdateBookUnAuthorizedAccess(BookApiTests.java:145)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-07-10 12:52:23.142 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:52:23.142 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.150 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.150 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.150 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.151 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.151 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@31ba0af0]
2024-07-10 12:52:23.151 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.152 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/1
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.152 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.153 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.154 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.154 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.155 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/1
2024-07-10 12:52:23.155 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/1 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.155 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.155 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:52:23.156 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/1
2024-07-10 12:52:23.157 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.157 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.463 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.472 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.472 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.472 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.472 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.472 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1955f4aa]
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.473 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.474 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.474 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.474 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.475 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[author]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[author]]
2024-07-10 12:52:23.476 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:52:23.477 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.477 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.480 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.489 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.489 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.489 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.489 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.490 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@225fe13f]
2024-07-10 12:52:23.490 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.490 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.490 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.490 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.491 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/books/5
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.491 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.492 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.493 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.493 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.493 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing DELETE /api/v1/books/5
2024-07-10 12:52:23.493 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on DELETE /api/v1/books/5 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.493 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.493 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:52:23.494 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/books/5
2024-07-10 12:52:23.494 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.495 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.deleteBook(java.lang.Long); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.498 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.506 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.507 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.507 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.507 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.507 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] to HttpSession [org.springframework.mock.web.MockHttpSession@59af828a]
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.508 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/books
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.508 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing POST /api/v1/books
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on POST /api/v1/books using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.509 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]]
2024-07-10 12:52:23.510 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/books
2024-07-10 12:52:23.510 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.513 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.createBook(com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@745b4ed4 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyAuthority('admin','author')]
2024-07-10 12:52:23.513 [main] TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[editor]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[editor]] to access denied handler since access is denied
org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.authorization.method.ThrowingMethodAuthorizationDeniedHandler.handleDeniedInvocation(ThrowingMethodAuthorizationDeniedHandler.java:38)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.handleDeniedInvocation(PreAuthorizeAuthorizationManager.java:92)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.handleDeniedInvocation(DeferringObservationAuthorizationManager.java:63)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.handle(AuthorizationManagerBeforeMethodInterceptor.java:288)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:261)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.PrePostMethodSecurityConfiguration$DeferringMethodInterceptor.invoke(PrePostMethodSecurityConfiguration.java:200)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.codebydaud.training.lecture_02.book_api.book.BookController$$SpringCGLIB$$0.createBook(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:189)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:175)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:131)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:151)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)
	at com.codebydaud.training.lecture_02.book_api.BookApiTests.testCreateBookUnAuthorizedAccess(BookApiTests.java:97)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-07-10 12:52:23.514 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2024-07-10 12:52:23.514 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.523 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
2024-07-10 12:52:23.523 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.523 [main] TRACE o.s.s.w.c.SupplierDeferredSecurityContext - Created SecurityContextImpl [Null authentication]
2024-07-10 12:52:23.523 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2024-07-10 12:52:23.523 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2b52e068]
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books', GET], Filters=[]] (1/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/api/v1/books/**', GET], Filters=[]] (2/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/swagger-ui/**', GET], Filters=[]] (3/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs', GET], Filters=[]] (4/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/v3/api-docs/**', GET], Filters=[]] (5/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.html', GET], Filters=[]] (6/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Ant [pattern='/index.js', GET], Filters=[]] (7/8)
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@1140585, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5233d3e0, org.springframework.security.web.context.SecurityContextHolderFilter@1afea182, org.springframework.security.web.header.HeaderWriterFilter@72139933, org.springframework.web.filter.CorsFilter@4fc23215, org.springframework.security.web.csrf.CsrfFilter@39584147, org.springframework.security.web.authentication.logout.LogoutFilter@1bb509a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e2afba0, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39da0e47, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2ed34811, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c96e1d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8ff4795, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fca4863, org.springframework.security.web.access.ExceptionTranslationFilter@38fc1904, org.springframework.security.web.access.intercept.AuthorizationFilter@262c75a3]] (8/8)
2024-07-10 12:52:23.524 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/v1/books/5
2024-07-10 12:52:23.524 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DisableEncodeUrlFilter (1/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (2/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderFilter (3/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (4/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (5/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking CsrfFilter (6/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (7/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Ant [pattern='/logout', POST]
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking UsernamePasswordAuthenticationFilter (8/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.s.w.a.UsernamePasswordAuthenticationFilter - Did not match request to Ant [pattern='/login', POST]
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLoginPageGeneratingFilter (9/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking DefaultLogoutPageGeneratingFilter (10/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.s.w.a.u.DefaultLogoutPageGeneratingFilter - Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (11/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.s.w.s.HttpSessionRequestCache - matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (12/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (13/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (14/15)
2024-07-10 12:52:23.525 [main] TRACE o.s.security.web.FilterChainProxy - Invoking AuthorizationFilter (15/15)
2024-07-10 12:52:23.526 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Authorizing PUT /api/v1/books/5
2024-07-10 12:52:23.526 [main] TRACE o.s.s.w.a.i.RequestMatcherDelegatingAuthorizationManager - Checking authorization on PUT /api/v1/books/5 using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6969e079
2024-07-10 12:52:23.526 [main] TRACE o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]] from SPRING_SECURITY_CONTEXT
2024-07-10 12:52:23.526 [main] TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[admin]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[admin]]
2024-07-10 12:52:23.526 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/v1/books/5
2024-07-10 12:52:23.527 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.528 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.codebydaud.training.lecture_02.book_api.book.BookController.updateBook(java.lang.Long,com.codebydaud.training.lecture_02.book_api.book.Book); target is of class [com.codebydaud.training.lecture_02.book_api.book.BookController]
2024-07-10 12:52:23.530 [main] TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]
2024-07-10 12:52:23.555 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-10 12:52:23.558 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-07-10 12:52:23.562 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
